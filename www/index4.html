<!DOCTYPE html>

<html>
    <head>
<meta http-equiv="Content-Security-Policy"/>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
		<link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Калькулятор Энтальпий и Влагосодержания</title>
    </head>
    <body>
	<div class="blik2">	
	<h2 class="subb">Это калькулятор Энтальпий и Влагосодержания
	</h2>
	<a p href=""> EN</a >
	</div>
	        <div class="app" >
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Выберите калькулятор</p>                    <!Device is Ready>
				<p>
				<div id="burger">Энтальпии и Влагосодержание</div>
						<ul>  
						<form>
								<div class="view-source">
										Давление:<br>
										<input type="number" class="input" id="Davlenie" name="Davlenie" max="100" min="0" value="101300"> <output> П<small><small>а</small></small></output><br><br>
									 
										Температура:<br>
										<input type="number" class="input" id="Temperature" name="Temperature" max="95" min="-50" > <output> &ordm С</output><br><br>
									 
										Отн. владжность:<br>
										<input type="number" class="input" id="Ot.Vlajnosti" name="Ot.Vlajnosti" max="100" min="-60"><output> %</output><br><br>
									
							
						<input type="button" class="out" id="btn" value="Расcчитать"><br><br>
							<div>Энтальпия</div>	
								<input type="number" class="input" id="entalpy" name="entalpy" readonly><output> <small><small>к</small></small>Д<small><small>ж</small></small>/<small><small>кг</small></small></output><br><br>
				
							<output> Влагосодержание</output>			
								<input type="number" class="input" id="Vlaga" name="Vlaga" readonly><output> <small><small>г</small></small>/<small><small>кг</small></small><output> <br><br>
						</form>  
						</ul>
						<script>
function finish(){
var t=[-50.0,-49.0,-48.0,-47.0,-46.0,-45.0,-44.0,-43.0,-42.0,-41.0,-40.0,-39.0,-38.0,-37.0,-36.0,-35.0,-34.0,-33.0,-32.0,-31.0,-30.0,-29.0,-28.0,-27.0,-26.0,-25.0,-24.0,-23.0,-22.0,-21.0,-20.0,-19.0,-18.0,-17.0,-16.0,-15.0,-14.0,-13.0,-12.0,-11.0,-10.0,-9.0,-8.0,-7.0,-6.0,-5.0,-4.0,-3.0,-2.0,-1.0,0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0,11.0,12.0,13.0,14.0,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.0,29.0,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.0,56.0,57.0,58.0,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0];
var d=[0.00002405,0.00002737,0.00003068,0.00003483,0.00003898,0.00004313,0.00004810,0.00005474,0.00006137,0.00006884,0.00007713,0.00008709,0.00009870,0.00011110,0.00012440,0.00013850,0.00015350,0.00017000,0.00018830,0.00020900,0.00023230,0.00025800,0.00028620,0.00031780,0.00035100,0.00039080,0.00043240,0.00047800,0.00052790,0.00058180,0.00064080,0.00070570,0.00077630,0.00085280,0.00093680,0.00102800,0.00112700,0.00123500,0.00135200,0.00148000,0.00161800,0.00176700,0.00193100,0.00210700,0.00229800,0.00250400,0.00272900,0.00297100,0.00323300,0.00351600,0.00382300,0.00411100,0.00441900,0.00474800,0.00509800,0.00547000,0.00586800,0.00629000,0.00674100,0.00721900,0.00772700,0.00826800,0.00884100,0.00945100,0.01009700,0.01078300,0.01151100,0.01228200,0.01310000,0.01396600,0.01488300,0.01585400,0.01688200,0.01797000,0.01912100,0.02033800,0.02162600,0.02298700,0.02442500,0.02594600,0.02755200,0.02925000,0.03104300,0.03293700,0.03493700,0.03705000,0.03928100,0.04163700,0.04412400,0.04675000,0.04952400,0.05245400,0.05554700,0.05881600,0.06226700,0.06591400,0.06976800,0.07384300,0.07814300,0.08269600,0.08751900,0.09261400,0.09800700,0.10372000,0.10977300,0.11619100,0.12299900,0.13022500,0.13789000,0.14604300,0.15471400,0.16393900,0.17377300,0.18426300,0.19545300,0.20742200,0.22022500,0.23394800,0.24867300,0.26450700,0.28155800,0.29993200,0.31981100,0.34134000,0.36472200,0.39017200,0.41796000,0.44838400,0.48181500,0.51871900,0.55958800,0.60506600,0.65594200,0.71319400,0.77801800,0.85203800,0.91717100,1.03613600,1.15245600,1.29102200,1.45882400,1.66594000,1.92791000,2.26941000,2.73291000,3.39739000];
var h=[-50240.0,-49230.0,-48210.0,-47200.0,-46180.0,-45170.0,-44150.0,-43130.0,-42100.0,-41080.0,-40050.0,-39020.0,-37990.0,-36950.0,-35910.0,-34870.0,-33830.0,-32780.0,-31730.0,-30680.0,-29610.0,-28540.0,-27470.0,-26380.0,-25310.0,-24190.0,-23080.0,-21960.0,-20830.0,-19690.0,-18540.0,-17370.0,-16190.0,-15000.0,-13780.0,-12550.0,-11300.0,-10020.0,-8720.0,-7400.0,-6040.0,-4660.0,-3250.0,-1800.0,-310.0,1210.0,2780.0,4400.0,6060.0,7780.0,9560.0,11300.0,13080.0,14920.0,16810.0,18760.0,20780.0,22860.0,25010.0,27230.0,29530.0,31910.0,34380.0,36950.0,39600.0,42360.0,45230.0,48210.0,51310.0,54540.0,57900.0,61400.0,65050.0,68860.0,72830.0,76970.0,81300.0,85820.0,90540.0,95480.0,100640.0,106040.0,111690.0,117610.0,123810.0,130310.0,137110.0,144250.0,151730.0,159580.0,167820.0,176470.0,185560.0,195110.0,205140.0,215690.0,226790.0,238480.0,250760.0,263720.0,277400.0,291790.0,306990.0,323030.0,339990.0,357900.0,376870.0,396950.0,418200.0,440760.0,464700.0,490120.0,517170.0,545980.0,576660.0,609420.0,644410.0,681880.0,722020.0,765140.0,811520.0,861450.0,915420.0,973810.0,1037160.0,1106080.0,1179350.0,1263620.0,1353870.0,1453520.0,1563830.0,1686510.0,1823690.0,1978010.0,2152650.0,2352010.0,2581220.0,2847600.0,3160600.0,3533380.0,3984720.0,4541690.0,5246090.0,6154180.0,7410130.0,9196160.0];
var x_spl, y_spl, b_spl, c_spl, d_spl, bhft, chft, dhft, bhfd, chfd, dhfd, bdft, cdft, ddft, bdfh, cdfh, ddfh, btfh, ctfh, dtfh, btfd, ctfd, dtfd;
var d1, h1, dout, hout;
		 var tvout=document.getElementById("Temperature").value;
		 var fiout=document.getElementById("Ot.Vlajnosti").value;
		 var P=document.getElementById("Davlenie").value;
 alert(t[0]);
///{**********   spline(146,t,h,bhft,chft,dhft) ;   ***********}
for (var i=0;i< 146;i++){    
						x_spl[i] = t[i];
                        y_spl[i] = h[i]; 
						}
	b_spl = [996.79514944,1019.8715172,1013.7187816,1015.2533562,1015.2677936,1013.6754693,1020.0303292,1026.2032139,1025.1568152,1023.1695253,1032.1650835,1028.1701405,1035.1543543,1041.2124423,1039.9958764,1038.8040521,1044.7879151,1052.0442874,1047.0349353,1059.8159714,1073.7011793,1065.3793115,1084.7815746,1075.4943902,1093.2408646,1121.5421516,1110.5905292,1126.0957316,1135.0265446,1143.7980902,1159.7810947,1177.0775309,1181.9087818,1205.2873421,1226.9418499,1236.9452582,1265.2771172,1291.9462731,1306.9377903,1340.3025657,1371.8519468,1392.2896469,1428.9894654,1471.7524914,1504.000569,1542.2452327,1597.0185003,1639.680766,1684.2584356,1763.2854916,1762.5995978,1746.316117,1812.1359342,1865.140146,1917.3034816,1985.6459276,2050.1128079,2113.9028406,2184.2758296,2258.9938411,2339.7488062,2422.0109343,2522.2074567,2609.1592389,2701.1555877,2816.2184102,2923.9707714,3037.898504,3164.4352124,3294.3606465,3428.1222018,3573.1505465,3729.2756123,3889.7470042,4051.7363707,4233.307513,4425.0335773,4616.5581779,4828.733711,5048.5069782,5277.2383763,5522.5395167,5782.6035568,6057.0462562,6349.2114185,6646.1080697,6966.3563026,7308.4667199,7659.7768178,8042.4260088,8440.5191471,8865.4974029,9317.4912415,9784.5376312,10284.358234,10818.029433,11393.524033,11977.874436,12604.978225,13322.212665,14026.171116,14783.102873,15611.417394,16491.227552,17423.672397,18424.082861,19519.996159,20645.932501,21886.273836,23238.972156,24657.837539,26209.677686,27913.451716,29716.515452,31690.486478,33841.538636,36193.358979,38765.025448,41576.539227,44708.817643,48088.190201,51868.421553,56138.123585,60659.084105,66445.539995,70368.755913,78649.436351,87653.498682,94296.568922,104860.22563,116142.52856,129539.66014,145278.8309,163845.01627,186221.10403,213270.56762,246406.62549,287872.93041,340241.65287,408500.4581,498116.51473,623963.48298,790139.55335,1052948.3036,1490187.2321,2112242.7679];
	alert(b_spl[2]);
for (var i=0;i<146;i++) {      bhft[i] = b_spl[i] ;
                               chft[i] = c_spl[i] ;
                               dhft[i] = d_spl[i] ; }
///{**********   spline(146,d,h,bhfd,chfd,dhfd) ;   ***********}
for (var i=0;i< 146;i++){   x_spl[i] = d[i]     ;
                              y_spl[i] = h[i]     ; }
  
  
for (var i=0;i< 146;i++){    bhfd[i] = b_spl[i] ;
                               chfd[i] = c_spl[i] ;
                               dhfd[i] = d_spl[i] ; }

///{**********   spline(146,t,d,bdft,cdft,ddft) ;   ***********}
for (var i=0;i< 146;i++){   x_spl[i] = t[i]     ;
                              y_spl[i] = d[i]     ; }
  
  
for (var i=0;i< 146;i++){     bdft[i] = b_spl[i] ;
                               cdft[i] = c_spl[i] ;
                               ddft[i] = d_spl[i] ; }

///{**********  spline(146,h,d,bdfh,cdfh,ddfh) ;    ***********}
for (var i=0;i< 146;i++){    x_spl[i] = h[i]     ;
                              y_spl[i] = d[i]     ; }
  
  
for (var i=0;i< 146;i++){     bdfh[i] = b_spl[i] ;
                               cdfh[i] = c_spl[i] ;
                               ddfh[i] = d_spl[i] ; }

///{**********  spline(146,h,t,btfh,ctfh,dtfh) ;    ***********}
for (var i=0;i< 146;i++){    x_spl[i] = h[i]     ;
                              y_spl[i] = t[i]     ; }
  
  
for (var i=0;i< 146;i++){     btfh[i] = b_spl[i] ;
                               ctfh[i] = c_spl[i] ;
                               dtfh[i] = d_spl[i] ; }

///{**********  spline(146,d,t,btfd,ctfd,dtfd) ;    ***********}
for (var i=0;i< 146;i++){    x_spl[i] = d[i]     ;
                              y_spl[i] = t[i]     ; }
  
  
for (var i=0;i< 146;i++){     btfd[i] = b_spl[i] ;
                               ctfd[i] = c_spl[i] ;
                               dtfd[i] = d_spl[i] ; }


		 
		 
		 
		 
		 //{**********   spline(146,t,h,bhft,chft,dhft) ;   ***********}
for (i= 0; i<=145;i++)    
		{
			x_spl[i] = t[i];
            y_spl[i] = h[i]; 
		};
		 
		 //{   определение положения точки (tvout,fiout)     }
//{*********  d1   := seval(146,tvout,t,d,bdft,cdft,ddft); *************}
for (i=0; i <= 145;i++)
	{		x_spl[i] = t[i]    ;
            y_spl[i] = d[i]    ;
            b_spl[i] = bdft[i] ;
            c_spl[i] = cdft[i] ;
            d_spl[i] = ddft[i] ; 
	}
  d1  = seval2(146,tvout) ;

//{  dout := 0.622*fiout*d1/(0.622+d1-fiout*d1);}
dout = 0.622 * fiout * d1 / ((0.622+d1)*P / 101300 - fiout * d1) ;
        if (fiout> 1.0)
		{
		//{   точка находится в области ледяного тумана    }
//{*********  h1   := seval(146,tvout,t,h,bhft,chft,dhft); *************}
	for (i=0; i <= 145;i++)
	{	  x_spl[i] = t[i]    ;
          y_spl[i] = h[i]    ;
          b_spl[i] = bhft[i] ;
          c_spl[i] = chft[i] ;
          d_spl[i] = dhft[i] ; 
		};					

h1   = seval2(146,tvout) ;


	if (tvout>= 0.0) 
	{
	//{   точка находится в области водяного тумана    }
		 hout = h1+4190.0*(dout-d1);
	}
	else
	{
	hout = h1+(2050.0*tvout-333400.0)*(dout-d1);
    }
		}

  else
  {
  //{   точка находится над (на) пограничной кривой  }
  hout = 1006.0* tvout + dout* (1860.0* tvout+ 2500000.0);
  }
   
};

function seval2(n,u,x_spl,y_spl,b_spl,c_spl,d_spl)
{
		var j, k, dx;
		var i = 1; 
   if (i >= n) 
   { 
   i= 1;  
   };
   if (u <  x_spl[i])    
		{
			i  = 1    ;
			j  = n+1  ;
	   };
   if (u <= x_spl[i+1])  
   {
   dx = u - x_spl[i];
   };  
 
  if (u <  x_spl[k])     
  { 
		j = k;     
  };
  if u >= x_spl[k]     { i = k; };
  if (j >  (i+1))        
  {
  k  = Math.trunc((i+j)/2);   
  };   
  return (y_spl[i] + dx * (b_spl[i]+ dx * (c_spl[i]+ dx* d_spl[i])));
}

document.getElementById("btn").onclick=function(){finish();Name_Product();};
									</script>
				</p>
					
        </div>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
    </body>
</html>
